<div class="container main-config">
    <ol class="breadcrumb">
        <li>
            <i class="fa fa-dashboard"></i> Crawljax Configuration
        </li>
        <li class="active">
            <i class="fa fa-desktop"></i> {{ctrl.config.name}}
        </li>
        <li>
            <button type="button"
                    class="btn btn-primary"
                    ng-click="ctrl.run()">Run {{ctrl.config.name}}
            </button>
        </li>
    </ol>

    <div class="panel panel-green data-set-area">
        <div class="panel-heading">
            <h3 class="panel-title">
                <i class="fa fa-database"></i>
                <span>Data Sets</span>
                <label class="click-btn"
                       ng-click="ctrl.addDataSet()">增加一個 Set</label>
            </h3>
        </div>
        <div class="panel-body">
            <div ng-repeat="dataSet in ctrl.dataSets">
                <div class="name-label"
                     ng-class="ctrl.selected.name === dataSet.name ? '-selected':''"
                     ng-click="ctrl.choseDataSet(dataSet)">
                    {{dataSet.name}}
                </div>
                <div class="delete-btn" ng-click="ctrl.deleteDataSet(dataSet)">X</div>
            </div>
        </div>
    </div>
    <hr/>
    <div>
        <div class="checkbox">
            <label>
                <input type="checkbox"
                       ng-model="ctrl.hideNoInputsState"/>
                隱藏無輸入框的頁面
            </label>
        </div>
    </div>

    <!--<div>noInputs: {{ctrl.noInputs}}</div>-->
    <!--<div>isProcessing: {{ctrl.isProcessing}}</div>-->

    <div class="row" ng-hide="(ctrl.noInputs === false) || ctrl.isProcessing">
        <div class="col-lg-12 loading">
            <b>無任何畫面有可輸入的值!!!</b>
        </div>
    </div>
    <div class="row" ng-if="ctrl.record.result['states']">
        <div class="col-lg-2">
            <div class="list-group">
                <div ng-repeat="_state in ctrl.record.result['states']"
                     ng-if="!ctrl.hideNoInputsState || _state.inputs.length">
                    <a ng-href="{{_state.url}}"
                       target="_blank">
                        <i class="fa fa-link"></i>
                    </a>
                    <a class="list-group-item"
                       ng-class="_state == ctrl.state ? 'active' : ''"
                       ng-click="ctrl.show(_state)">
                        <i class="fa fa-star"></i>
                        <span>{{_state.name}}</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="panel panel-default" ng-show="ctrl.state">
                <div class="panel-body snapshot">
                    <img src="" ng-src="{{ctrl.state.snapshot}}"/>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group input-group" ng-repeat="input in ctrl.state.inputs">
                <span class="input-group-addon">{{input.index}}.</span>
                <input ng-if="input.type.toLowerCase() == 'input'"
                       type="text"
                       class="form-control"
                       ng-model="ctrl.selected.formInputValues[input.key]"/>
                <textarea ng-if="input.type.toLowerCase() == 'textarea'"
                          class="form-control"
                          ng-model="ctrl.selected.formInputValues[input.key]"></textarea>
            </div>
        </div>
    </div>
    <div class="row" ng-if="!ctrl.record.result">
        <div class="col-lg-12 loading">
            <img src="./images/loading.gif"/>
            <b>{{ctrl.msg}}</b>
        </div>
    </div>
    <div class="row" ng-if="ctrl.record.result && !ctrl.record.result['states']">
        <div class="col-lg-12 loading">
            <b>查無過往資料</b>
        </div>
    </div>
</div>