<div class="container main-config">
    <ol class="breadcrumb">
        <li>
            <i class="fa fa-dashboard"></i> Crawljax Configuration
        </li>
        <li class="active">
            <i class="fa fa-desktop"></i> {{ctrl.config.name}}
        </li>
        <li>
            <button type="button"
                    class="btn btn-primary"
                    ng-click="ctrl.run()">Run {{ctrl.config.name}}
            </button>
        </li>
    </ol>
    <div class="row" ng-if="ctrl.record.result['states']">
        <div class="col-lg-2">
            <div class="list-group">
                <div ng-repeat="_state in ctrl.record.result['states']"
                     ng-if="_state.inputs.length">
                    <a ng-href="{{_state.url}}"
                       target="_blank">
                        <i class="fa fa-link"></i>
                    </a>
                    <a class="list-group-item"
                       ng-class="_state == ctrl.state ? 'active' : ''"
                       ng-click="ctrl.show(_state)">
                        <i class="fa fa-star"></i>
                        <span>{{_state.name}}</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="panel panel-default" ng-show="ctrl.state">
                <div class="panel-body snapshot">
                    <img src="" ng-src="{{ctrl.state.snapshot}}"/>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group input-group" ng-repeat="input in ctrl.state.inputs">
                <span class="input-group-addon">{{input.index}}.</span>
                <input ng-if="input.type.toLowerCase() == 'input'"
                       type="text"
                       class="form-control"
                       ng-model="ctrl.formInputModel[input.key]"/>
                <textarea ng-if="input.type.toLowerCase() == 'textarea'"
                          class="form-control"
                          ng-model="ctrl.formInputModel[input.key]"></textarea>
            </div>
        </div>
    </div>
    <div class="row" ng-if="!ctrl.record.result">
        <div class="col-lg-12 loading">
            <img src="./images/loading.gif"/>
            <b>{{ctrl.msg}}</b>
        </div>
    </div>
    <div class="row" ng-if="ctrl.record.result && !ctrl.record.result['states']">
        <div class="col-lg-12 loading">
            <b>查無過往資料</b>
        </div>
    </div>
</div>